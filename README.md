## Android Basic ORM

A Framework that could generate SQLite Tables from classes on your Android App. 
[Download here](https://github.com/adrianobrito/AndroidBasicORM/blob/master/target/AndroidBasicORM-0.0.1-SNAPSHOT.jar) and put on your library dir on the Android App.

To configure you need to have a class that inherits the abstract class `PersistenceManagerFactory`. 
```java
public class DemoPersistenceManagerFactory extends PersistenceManagerFactory {

   /** This method list all classes that will be scanned by PersistenceManager **/
	@Override
	public List<Class> registerEntities() {
		List<Class> classes = new ArrayList<Class>();
		 //Entity is a class that will be turned into a SQLite Table on Android 
		classes.add(Entity.class);
		return classes;
	}


  /** This method contains the name of the database that will be created for the app **/
	@Override
	public String database() {
		return "database_name";
	}

}
```

The scanned classes should have `@Id` annotation on the field that will be mapped to Primary Key Field on the table generated by the class. When you have another entity, the persistence manager generate a INTEGER column with the name of the property. When you doesn't want to map a property, you have to put `@Transient` annotation.
```java
public class Entity implements Serializable{
	
	@Id
	private Integer id;
	private String name;
	private AnotherEntity anotherEntity; // generate INTEGER column
	
	@Transient
	private Integer transientData;
	
	public Integer getId() { return id; }
	public void setId(Integer id) { this.id = id; }
	
	public String getName() { return name; }
	public void setName(String name) { this.name = name; }
	
	... 
}

```

After all this, to use the framework you will need to have a `PersistenceManager`'s instance. When you execute the create() method, it creates all table that still isn't created. 
```java
PersistenceManagerFactory persistenceManagerFactory = new DemoPersistenceManagerFactory();
PersistenceManager persistenceManager = persistenceManagerFactory.create();
```

Now we will explore the basic CRUD operations.

**Insert**
```java
persistenceManager.insert(entity);
```

**Delete**
```java
// delete rows that have id = 15
persistenceManager.delete(Entity.class, "id = ?" , new String[]{"15"});  
```

**Update**
```java
// Update rows that have id = 15, with the values of the entity object
persistenceManager.update(entity, "id = ?" , new String[]{"15"});  
```

**Query Methods**
```java
/** Query rows that have id = 15,  
    and process the results with a instance of CursorProcessor
**/
persistenceManager.query(Entity.class, 
		        "id = ?" , 
		        new String[]{"15"},
		        new CursorProcessor<Entity>(){ ... });  
		        
		        
persistenceManager.executeSQL("SELECT * FROM Entity WHERE id = ?",  
		        new String[]{"15"},
		        new CursorProcessor<Entity>(){ ... }); 
```

